<!DOCTYPE html>
<html
  lang="es"
  xmlns:th="http://www.thymeleaf.org"
  th:replace="~{_layout :: html(~{::title}, ~{::section}, ~{::pageCss}, ~{::pageScript})}">
  <head>
    <title th:text="${pageTitle ?: 'Gestionar Películas'}">
      Gestionar Películas - WatchList
    </title>
    <th:block th:fragment="pageCss"> </th:block>
  </head>
  <body>
    <section>
      <div>
        <h2 th:text="${pageTitle ?: 'Gestionar Películas'}">
          Gestionar Películas
        </h2>
        <div>
          <a th:href="@{/admin/peliculas/nuevo}" class="btn btn-small btn-yellow"
            >Añadir Nueva Película</a
          >
        </div>
      </div>

      <div
        th:if="${successMessage}"
        class="alert alert-success"
        th:text="${successMessage}"></div>
      <div
        th:if="${errorMessage}"
        class="alert alert-danger"
        th:text="${errorMessage}"></div>

      <div th:if="${not #lists.isEmpty(peliculas)}">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Título</th>
              <th>Año</th>
              <th>Duración (min)</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="pelicula : ${peliculas}">
              <td th:text="${pelicula.id}"></td>
              <td th:text="${pelicula.titulo}"></td>
              <td th:text="${pelicula.anioEstreno}"></td>
              <td th:text="${pelicula.duracionMin}"></td>
              <td>
                <a
                  th:href="@{/admin/peliculas/editar/{id}(id=${pelicula.id})}"
                  class="btn btn-small btn-blue"
                  >Editar</a
                >
                <form
                  th:action="@{/admin/peliculas/eliminar/{id}(id=${pelicula.id})}"
                  method="post"
                  onsubmit="return confirm('¿Estás seguro de que quieres eliminar esta película?');">
                  <button type="submit" class="btn btn-small btn-red">Eliminar</button>
                </form>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div th:if="${#lists.isEmpty(peliculas)}">
        <p>No hay películas para mostrar.</p>
      </div>
    </section>
    <th:block th:fragment="pageScript"></th:block>
  </body>
</html>
